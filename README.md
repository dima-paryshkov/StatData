# StatData Tool

Этот проект представляет собой утилиту для обработки и анализа бинарных данных, представленных в виде структур `StatData`. Утилита поддерживает функции сериализации и десериализации данных, их объединение, сортировку и тестирование.

## Описание

Утилита выполняет следующие функции:

1. **Сериализация и десериализация:**
   - `StoreDump()` — сохраняет массив структур `StatData` в файл.
   - `LoadDump()` — загружает массив структур `StatData` из файла.

2. **Обработка данных:**
   - `JoinDump()` — объединяет два массива `StatData`, обеспечивая уникальность значений `id` и корректную обработку других полей.
   - `SortDump()` — сортирует массив структур `StatData` по возрастанию значения поля `cost`.

3. **Утилита для обработки данных:**
   - Принимает два файла, сформированных с помощью `StoreDump()`, объединяет их с помощью `JoinDump()`, сортирует с помощью `SortDump()` и сохраняет результат в третий файл. Также выводит первые 10 записей в виде таблицы в консоль.

4. **Тестирование:**
   - Разработана утилита для тестирования, которая проверяет корректность работы утилиты обработки данных.

## Структура проекта

```
statdata_tool/
├── build/                  # Каталог для объектных файлов
├── include/                # Каталог для заголовочных файлов
│   └── statdata.h          # Заголовочный файл с определением структуры StatData
├── src/                    # Исходные файлы
│   ├── main.c              # Главный исходный файл
│   ├── oi.c                # Исходный файл для операций с данными
│   └── process.c           # Исходный файл для обработки данных
├── test/                   # Тесты
│   └── tests.c             # Тесты для проверки работы утилиты
├── Makefile                # Makefile для сборки проекта
└── README.md               # Этот файл
```

## Компиляция и сборка

1. Склонируйте репозиторий на вашу локальную машину:
   ```bash
   git clone https://github.com/dima-paryshkov/StatData.git
   ```

2. Перейдите в директорию проекта:
   ```bash
   cd statdata_tool
   ```

3. Для сборки проекта используйте команду:
   ```bash
   make
   ```
   Это создаст исполнимый файл `statdata_tool` в каталоге `bin`.

4. Для компиляции и запуска тестов используйте:
   ```bash
   make test
   ```

5. Для статического анализа исходного кода с использованием `cppcheck`:
   ```bash
   make cppcheck
   ```

6. Для очистки всех скомпилированных файлов и директорий:
   ```bash
   make clean
   ```

## Использование

1. **Сохранение данных в файл:**
   Для сохранения данных в файл используйте функцию `StoreDump()`, которая принимает массив `StatData` и путь к файлу для сохранения.

2. **Загрузка данных из файла:**
   Для загрузки данных используйте функцию `LoadDump()`, которая принимает путь к файлу и возвращает массив `StatData`.

3. **Объединение данных:**
   Функция `JoinDump()` принимает два массива `StatData` и объединяет их так, чтобы значения `id` были уникальными. Если `id` повторяются, то данные по этим `id` объединяются, суммируя значения `count` и `cost`, и обновляются поля `primary` и `mode`.

4. **Сортировка данных:**
   Функция `SortDump()` сортирует массив `StatData` по возрастанию значения поля `cost`.

5. **Использование утилиты обработки данных:**
   Утилита принимает два файла с данными, объединяет их и сортирует. Результат сохраняется в третий файл, а первые 10 записей выводятся в консоль. Пример:
   ```bash
   ./statdata_tool input_file_1.bin input_file_2.bin output_file.bin
   ```

